"use strict";(()=>{var g=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var i=(h,s,t,r)=>{for(var a=r>1?void 0:r?f(s,t):s,o=h.length-1,p;o>=0;o--)(p=h[o])&&(a=(r?p(s,t,a):p(a))||a);return r&&a&&g(s,t,a),a};var L=class extends Laya.Scene{};var{regClass:w}=Laya,d=class extends L{onAwake(){Laya.loader.load(["resources/UI/splash.png","resources/UI/progress.png","resources/UI/progress$bar.png"]).then(()=>{let s=["resources/UI/D_1.jpg","resources/UI/mask.png","resources/UI/photograph1.png","resources/UI/photograph2.png","resources/UI/photograph3.png","resources/UI/pinao.png","resources/UI/wedding.png","resources/UI/note1.png","resources/UI/note2.png","resources/UI/note3.png",{url:"resources/atlas/destory.atlas",type:Laya.Loader.ATLAS},{url:"scenes/MainGame.ls",type:Laya.Loader.HIERARCHY},{url:"prefab/DropBox1.lh",type:Laya.Loader.HIERARCHY},{url:"prefab/DropBox2.lh",type:Laya.Loader.HIERARCHY},{url:"prefab/DropBox3.lh",type:Laya.Loader.HIERARCHY},{url:"resources/sound/bgm.mp3",type:Laya.Loader.BUFFER}];Laya.loader.load(s,null,Laya.Handler.create(this,this.onLoading,null,!1)).then(()=>{this.progress.value=.98,console.log("加载结束",this.progress.value),Laya.Scene.open("scenes/MainGame.ls")}),Laya.loader.on(Laya.Event.ERROR,this,this.onError)})}onError(s){console.log("加载失败: "+s)}onLoading(s){s>.92?this.progress.value=.95:this.progress.value=s}};d=i([w("xmaaYG8AQ1yC07pr_JvyPA")],d);var{regClass:v,property:m}=Laya,e=class{constructor(s){this.time=s}},n=class extends Laya.Script{constructor(){super();this.ruleDelta=300;this.createBoxInterval=0;this._time=0;this._startTime=0;this._started=!1;this.updateStop=!1;this.ruleIndex=0;this.rules=[new e(0*this.ruleDelta),new e(1*this.ruleDelta),new e(2*this.ruleDelta),new e(4*this.ruleDelta),new e(5*this.ruleDelta),new e(6*this.ruleDelta),new e(7*this.ruleDelta),new e(8*this.ruleDelta),new e(9*this.ruleDelta),new e(10*this.ruleDelta),new e(12*this.ruleDelta),new e(13*this.ruleDelta),new e(14*this.ruleDelta),new e(15*this.ruleDelta),new e(16*this.ruleDelta),new e(17*this.ruleDelta),new e(18*this.ruleDelta),new e(20*this.ruleDelta),new e(21*this.ruleDelta),new e(22*this.ruleDelta),new e(23*this.ruleDelta),new e(24*this.ruleDelta),new e(25*this.ruleDelta),new e(26*this.ruleDelta),new e(28*this.ruleDelta),new e(29*this.ruleDelta),new e(30*this.ruleDelta),new e(31*this.ruleDelta),new e(32*this.ruleDelta),new e(33*this.ruleDelta),new e(34*this.ruleDelta),new e(36*this.ruleDelta),new e(37*this.ruleDelta),new e(38*this.ruleDelta),new e(39*this.ruleDelta),new e(40*this.ruleDelta),new e(41*this.ruleDelta),new e(42*this.ruleDelta),new e(44*this.ruleDelta),new e(45*this.ruleDelta),new e(46*this.ruleDelta),new e(47*this.ruleDelta),new e(48*this.ruleDelta),new e(49*this.ruleDelta),new e(50*this.ruleDelta),new e(52*this.ruleDelta),new e(53*this.ruleDelta),new e(54*this.ruleDelta)];this.bOnLoadRes1=!1;this.bLoadRes1Finished=!1;this.bOnLoadRes2=!1;this.bLoadRes2Finished=!1}loadRes1(){let t=["resources/UI/B_1.jpg","resources/UI/B_2.jpg"];Laya.loader.load(t).then(r=>{this.bLoadRes1Finished=!0})}loadRes2(){let t=["resources/UI/D_2.jpg","resources/UI/520.png","resources/UI/forver.png","resources/UI/map.png","resources/UI/logo.png"];Laya.loader.load(t).then(r=>{this.bLoadRes2Finished=!0})}onEnable(){this._gameBox=this.owner.getChildByName("gameBox"),Laya.stage.on(Laya.Event.BLUR,this,()=>{this.updateStop=!0}),Laya.stage.on(Laya.Event.FOCUS,this,()=>{this.updateStop=!1})}onStart(){let t=this.owner.getChildByName("ground").getComponent(Laya.BoxCollider);t.width=Laya.stage.width,this._started||(this._started=!0,this.enabled=!0),this.ruleIndex=0,this._time=0,this._startTime=Date.now(),this.bgm1Channel=Laya.SoundManager.playSound("resources/sound/bgm.mp3")}onUpdate(){if(this.bOnLoadRes1||(this.bOnLoadRes1=!1,this.loadRes1()),this.bLoadRes1Finished&&!this.bOnLoadRes2&&(this.bOnLoadRes2=!1,this.loadRes2()),this.updateStop)return;let t=Date.now();this._started&&(t-this._time>=this.createBoxInterval&&(this.createBoxInterval=1500+Math.random()*500,this._time=t,this.createBox()),this.bgm1Channel!=null&&this.bgm1Channel.position>0&&!l.instance.getStartMove()&&l.instance.onStartMove())}createBox(){let t=Math.ceil(Math.random()*3),r;t==1?r=this.dropBox1:t==2?r=this.dropBox2:t==3&&(r=this.dropBox3);let a=Laya.Pool.getItemByCreateFun("dropBox"+t,r.create,r);a.pos(Math.random()*(Laya.stage.width-200)+100,0),this._gameBox.addChild(a)}stopGame(){this._started=!1,this.enabled=!1,this._gameBox.removeChildren()}};i([m({type:Laya.Prefab})],n.prototype,"dropBox1",2),i([m({type:Laya.Prefab})],n.prototype,"dropBox2",2),i([m({type:Laya.Prefab})],n.prototype,"dropBox3",2),n=i([v("dzs3WQ4dRE62Koi0GxIy8g")],n);var c=class extends Laya.Scene{};var{regClass:b,property:F}=Laya,l=class extends c{constructor(){super();this._startMove=!1;l.instance=this}onEnable(){this._control=this.getComponent(n),this._score=0,this.maskImg.mask=this.maskS}onTipClick(t){this.copyTxt.text="已复制"}onStartMove(){this._startMove=!0}getStartMove(){return this._startMove}addScore(t){}};l=i([b("m4_azuqxSJiC2LHX4N_XRQ")],l);var{regClass:D,property:G}=Laya,y=class extends Laya.Script{constructor(){super();this._time=0;this.rollLength=1980}onEnable(){this._time=Date.now(),this.owner.y=0}onStart(){}onUpdate(){if(l.instance.getStartMove()){let t=Date.now(),r=this.owner,a=t-this._time;if(a>5e3&&a<=6e3){let o=a-5e3;r.y=-(this.rollLength/1e3*o)}else if(a>6e3&&a<=16e3)r.y=-this.rollLength;else if(a>16e3&&a<=17e3){let o=a-16e3;r.y=-(this.rollLength/1e3*o)-this.rollLength}else a>17e3&&a<=18e3?r.y=-2*this.rollLength:a>18e3&&r.y>-6e3&&(a>2e4?r.y-=2:a>18e3&&(r.y-=(a-18e3)/1e3))}}onDisable(){}};y=i([D("r2Jj5AK7Rfe87Q3mtViCCg")],y);var{regClass:x,property:C}=Laya,u=class extends Laya.Script{constructor(){super();this.index=1}onEnable(){this._rig=this.owner.getComponent(Laya.RigidBody),this._ani=new Laya.Animation}onUpdate(){this.owner.rotation++,this.owner.y+=Laya.stage.height/320}onTriggerEnter(t,r,a){var o=this.owner;if(t.label==="ground"){if(l.instance.addScore(1),o.parent){let p=Laya.Pool.getItemByCreateFun("effect",this.createEffect,this);Laya.Animation.createFrames("resources/atlas/destory.atlas","destory"),p.pos(o.x-o.width,o.y-o.height/2),p.scale(1.5,1.5),o.parent.addChild(p),p.play(0,!0)}o.removeSelf()}}createEffect(){let t=new Laya.Animation;t.loadAtlas("resources/atlas/destory.atlas"),t.on(Laya.Event.COMPLETE,null,r);function r(){t.removeSelf(),Laya.Pool.recover("effect",t)}return t}onDisable(){Laya.Pool.recover("dropBox"+this.index,this.owner)}};i([C({type:"number"})],u.prototype,"index",2),u=i([x("3L23NCFLSAieUApqTrVoCQ")],u);})();
