"use strict";(()=>{var g=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var r=(l,o,e,a)=>{for(var t=a>1?void 0:a?m(o,e):o,s=l.length-1,p;s>=0;s--)(p=l[s])&&(t=(a?p(o,e,t):p(t))||t);return a&&t&&g(o,e,t),t};var c=class extends Laya.Scene{};var{regClass:v}=Laya,y=class extends c{onAwake(){Laya.loader.load(["resources/UI/splash.jpg","resources/UI/progress.png","resources/UI/progress$bar.png"]).then(()=>{let o=["resources/UI/D_1.jpg","resources/UI/mask.png","resources/UI/photograph1.png","resources/UI/photograph2.png","resources/UI/photograph3.png","resources/UI/pinao.jpg","resources/UI/wedding1.png","resources/UI/wedding2.png","resources/UI/open1.png","resources/UI/open2.png","resources/UI/note1.png","resources/UI/note2.png","resources/UI/note3.png",{url:"resources/atlas/destory.atlas",type:Laya.Loader.ATLAS},{url:"scenes/GameMain.ls",type:Laya.Loader.HIERARCHY},{url:"prefab/DropBox1.lh",type:Laya.Loader.HIERARCHY},{url:"prefab/DropBox2.lh",type:Laya.Loader.HIERARCHY},{url:"prefab/DropBox3.lh",type:Laya.Loader.HIERARCHY},{url:"resources/sound/bgm.mp3",type:Laya.Loader.BUFFER}];Laya.loader.load(o,null,Laya.Handler.create(this,this.onLoading,null,!1)).then(()=>{this.progress.value=1,console.log("加载结束",this.progress.value),Laya.Scene.open("scenes/GameMain.ls")}),Laya.loader.on(Laya.Event.ERROR,this,this.onError)})}onError(o){console.log("加载失败: "+o)}onLoading(o){this.progress.value=o}};y=r([v("0xcbP_peQM2UyU_UxNsj3w")],y);var{regClass:f,property:b}=Laya,d=class extends Laya.Script{constructor(){super();this.index=1}onEnable(){this._rig=this.owner.getComponent(Laya.RigidBody),this._ani=new Laya.Animation}onUpdate(){this.owner.rotation++,this.owner.y+=Laya.stage.height/320}onTriggerEnter(e,a,t){var s=this.owner;if(e.label==="ground"){if(s.parent){let p=Laya.Pool.getItemByCreateFun("effect",this.createEffect,this);Laya.Animation.createFrames("resources/atlas/destory.atlas","destory"),p.pos(s.x-s.width,s.y-s.height/2),p.scale(1.5,1.5),s.parent.addChild(p),p.play(0,!0)}s.removeSelf()}}createEffect(){let e=new Laya.Animation;e.loadAtlas("resources/atlas/destory.atlas"),e.on(Laya.Event.COMPLETE,null,a);function a(){e.removeSelf(),Laya.Pool.recover("effect",e)}return e}onDisable(){Laya.Pool.recover("dropBox"+this.index,this.owner)}};r([b({type:"number"})],d.prototype,"index",2),d=r([f("3L23NCFLSAieUApqTrVoCQ")],d);var{regClass:x,property:L}=Laya,i=class extends Laya.Script{constructor(){super();this.createBoxInterval=1e3;this._time=0;this._started=!1;this.updateStop=!1;this.bOnLoadRes1=!1;this.bLoadRes1Finished=!1;this.bOnLoadRes2=!1;this.bLoadRes2Finished=!1}loadRes1(){let e=["resources/UI/B_1.jpg","resources/UI/B_2.jpg"];Laya.loader.load(e).then(a=>{this.bLoadRes1Finished=!0})}loadRes2(){let e=["resources/UI/D_2.jpg","resources/UI/D_3.jpg","resources/UI/forver.png","resources/UI/map.png","resources/UI/logo.png"];Laya.loader.load(e).then(a=>{this.bLoadRes2Finished=!0})}onEnable(){this._gameBox=this.owner.getChildByName("gameBox"),Laya.stage.on(Laya.Event.BLUR,this,()=>{this.updateStop=!0}),Laya.stage.on(Laya.Event.FOCUS,this,()=>{this.updateStop=!1})}onStart(){let e=this.owner.getChildByName("ground").getComponent(Laya.BoxCollider);e.width=Laya.stage.width}onUpdate(){if(this.bOnLoadRes1||(this.bOnLoadRes1=!0,this.loadRes1()),this.bLoadRes1Finished&&!this.bOnLoadRes2&&(this.bOnLoadRes2=!0,this.loadRes2()),this.updateStop)return;let e=Date.now();this._started&&e-this._time>=this.createBoxInterval&&(this.createBoxInterval=1500+Math.random()*500,this._time=e,this.createBox())}createBox(){let e=Math.ceil(Math.random()*3),a;e==1?a=this.dropBox1:e==2?a=this.dropBox2:e==3&&(a=this.dropBox3);let t=Laya.Pool.getItemByCreateFun("dropBox"+e,a.create,a);t.pos(Math.random()*(Laya.stage.width-200)+100,0),this._gameBox.addChild(t)}startGame(){this._started||(this._started=!0,this.enabled=!0,this._time=0,Laya.SoundManager.autoStopMusic=!1,Laya.SoundManager.playMusic("resources/sound/bgm.mp3"))}stopGame(){this._started=!1,this.enabled=!1,this._gameBox.removeChildren()}};r([L({type:Laya.Prefab})],i.prototype,"dropBox1",2),r([L({type:Laya.Prefab})],i.prototype,"dropBox2",2),r([L({type:Laya.Prefab})],i.prototype,"dropBox3",2),i=r([x("h4oJ3hXoQ4uRp3Mnk2BZ7g")],i);var u=class extends Laya.Scene{};var{regClass:I,property:k}=Laya,n=class extends u{constructor(){super();this._CanMove=!1;this._start=!1;n.instance=this}onEnable(){this.maskImg.mask=this.maskS,this.openImg2.mask=this.openMask,this._control=this.getComponent(i),this.bottomAnim=this.bottomBox.getComponent(Laya.Animator2D),Laya.stage.on(Laya.Event.CLICK,this,this.onTipClick),this.copyTxt.on(Laya.Event.CLICK,this,this.onCopyClick)}onTipClick(e){this._start||(this._start=!0,this.openImg1.visible=!1,this.openImg2.visible=!1,this.bottomAnim.play(),this._CanMove=!0,this._control.startGame(),this.Panel.vScrollBar.touchScrollEnable=!1)}onCopyClick(e){navigator.clipboard.writeText("湖南省长沙市岳麓区小天鹅洋湖婚庆园"),this.copyTxt.text="已复制"}getStartMove(){return this._CanMove}MoveOver(){this._CanMove=!1,this.Panel.vScrollBar.touchScrollEnable=!0}};n=r([I("ezOvwxztQOq7upo5ov7wSw")],n);var{regClass:B,property:H}=Laya,h=class extends Laya.Script{constructor(){super();this._time=0}onEnable(){this._time=Date.now()}onStart(){}onUpdate(){if(n.instance.getStartMove()){let e=Date.now(),a=this.owner.vScrollBar,t=e-this._time;t<=1e3?a.value+=18:t>1e3&&t<=2e3?a.value+=1.5+(2e3-t)/1e3*16:t>2e3&&(a.value<6260?a.value+=1.5:n.instance.MoveOver())}else this._time=Date.now()}onDisable(){}};h=r([B("XMO308xeTseCglTfQfBbAg")],h);})();
